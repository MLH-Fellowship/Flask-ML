{% extends "base.html" %}

{% block page %} Processing {% endblock %}

{% block contents %}
<div class="py-4 text-center">
    <div class="w-25 d-inline-block">
        <div class="spinner-border" role="status">
            <img class="mb-4 mw-100" src="/assets/logo.png">
        </div>
    </div>
    <h2>Processing Image, please wait...</h2>
    <div id="results"></div>
</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script>
    const interval = setInterval(() => {
        fetch('/get-results/{{ pid }}').then(r => r.json()).then(data => {
            if (data.running) return;

            $('h2').text('ML Results');
            $('#results').html(data.html)
            return clearInterval(interval)
        })
    }, 3000)
</script>
{% endblock %}
